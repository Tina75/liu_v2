<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>深拷贝和浅拷贝</title>
</head>
<body>

</body>
<script>
    var a = {
        name:'tina',
        age:20,
        job:{
            example:[1,4]
        }
    }
    var deepCopy= function(source) {

        var result={};

        for (var key in source) {

            result[key] = typeof source[key]==='object'? deepCopy(source[key]): source[key];

        }
        return result;
    }
    var b = deepCopy(a);
    b.job = 'sss';
//    console.log(a);
//    console.log(b)
</script>
<script>
//    <!--数组的深拷贝-->
var arr = ["One","Two","Three"];
var arrto = arr;
//arrto[1] = "test";
//document.writeln("数组的原始值：" + arr + "<br />");//Export:数组的原始值：One,test,Three
//document.writeln("数组的新值：" + arrto + "<br />");//Export:数组的新值：One,test,Three
var arrNew = arr.slice(0);
    arrNew[1] = "new";
//document.writeln("数组的原始值：" + arr + "<br />");//Export:数组的原始值：One,test,Three
//document.writeln("数组的新值：" + arrNew + "<br />");//Export:数组的新值：One,test,Three
</script>
<script>
    var arr = [
        {
            "id": "model_01",
            "rule_model_name": "IP",
            "rule_model_description": "网络协议（Internet Protocol）",
            "ruleExpList": [
                {
                    "id": "exp_0001",
                    "rule_expression_str": "ip.src",
                    "expstr_model_id": "model_01",
                    "exp_validation_property": "length",
                    "exp_validation_range_min": "7",
                    "exp_validation_range_max": "15",
                    "exp_validation_mattcher": "[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}",
                    "relationList": [
                        {
                            "id": "relation_01",
                            "relation_exp": "==",
                            "relation_level": "2"
                        },
                        {
                            "id": "relation_02",
                            "relation_exp": "!=",
                            "relation_level": "2"
                        }
                    ]
                },
                {
                    "id": "exp_0002",
                    "rule_expression_str": "ip.dst",
                    "expstr_model_id": "model_01",
                    "exp_validation_property": "length",
                    "exp_validation_range_min": "7",
                    "exp_validation_range_max": "15",
                    "exp_validation_mattcher": "[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}",
                    "relationList": [
                        {
                            "id": "relation_01",
                            "relation_exp": "==",
                            "relation_level": "2"
                        },
                        {
                            "id": "relation_02",
                            "relation_exp": "!=",
                            "relation_level": "2"
                        }
                    ]
                },
                {
                    "id": "exp_0003",
                    "rule_expression_str": "ip.len",
                    "expstr_model_id": "model_01",
                    "exp_validation_property": "value",
                    "exp_validation_range_min": "0",
                    "exp_validation_range_max": "65536",
                    "exp_validation_mattcher": null,
                    "relationList": []
                },
                {
                    "id": "exp_0004",
                    "rule_expression_str": "ip.payload ",
                    "expstr_model_id": "model_01",
                    "exp_validation_property": null,
                    "exp_validation_range_min": "",
                    "exp_validation_range_max": null,
                    "exp_validation_mattcher": null,
                    "relationList": []
                },
                {
                    "id": "exp_0005",
                    "rule_expression_str": "ip.payload.len",
                    "expstr_model_id": "model_01",
                    "exp_validation_property": null,
                    "exp_validation_range_min": "",
                    "exp_validation_range_max": null,
                    "exp_validation_mattcher": null,
                    "relationList": []
                },
                {
                    "id": "exp_0006",
                    "rule_expression_str": "ip.proto",
                    "expstr_model_id": "model_01",
                    "exp_validation_property": null,
                    "exp_validation_range_min": "",
                    "exp_validation_range_max": null,
                    "exp_validation_mattcher": "[A-Z]{2,5}",
                    "relationList": []
                },
                {
                    "id": "exp_0007",
                    "rule_expression_str": "ip.hdr",
                    "expstr_model_id": "model_01",
                    "exp_validation_property": null,
                    "exp_validation_range_min": "",
                    "exp_validation_range_max": null,
                    "exp_validation_mattcher": null,
                    "relationList": []
                },
                {
                    "id": "exp_0008",
                    "rule_expression_str": "ip.hdr_len",
                    "expstr_model_id": "model_01",
                    "exp_validation_property": null,
                    "exp_validation_range_min": "",
                    "exp_validation_range_max": null,
                    "exp_validation_mattcher": null,
                    "relationList": []
                }
            ]
        },
        {
            "id": "model_02",
            "rule_model_name": "IPV6",
            "rule_model_description": "网络协议（Internet Protocol Version 6）",
            "ruleExpList": []
        },
    ];
    //var newArr = arr.concat();
    var data={
        a:deepCopy(arr)
    }
    var mid = data.a;
    for(var i = 0; i < mid.length; i++){
        if(i == 0){
            mid[i].selected = true;
            for(var j = 0; j < mid[i].ruleExpList.length; j++){
                if(j == 0){
                    mid[i].ruleExpList[j].selected = true;
                }else{
                    mid[i].ruleExpList[j].selected = false;
                }
            }
        }else{
            mid[i].selected = false;
        }
    }
    console.log(mid);
    console.log(arr); //这里的arr被改变了
</script>
</html>